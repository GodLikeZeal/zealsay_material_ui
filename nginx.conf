worker_processes auto;
worker_cpu_affinity auto;
worker_rlimit_nofile 65535;


events {
    use  epoll;
    worker_connections  10240;
}

http {
    include       mime.types;
    default_type  application/octet-stream;


    sendfile        on;
    client_max_body_size 100m;
    tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    gzip on;
    gzip_min_length 1k;
    gzip_buffers 4 16k;
    gzip_http_version 1.1;
    gzip_comp_level 2;
    gzip_types text/plain application/javascript text/css application/xml text/javascript image/jpeg image/gif image/png;
    gzip_vary off;
    #gzip_proxied any;
    gzip_disable "MSIE [1-6]\.";
    #open_file_cache max=20480 inactive=20s;
    #open_file_cache_min_uses 1;
    #open_file_cache_valid 30s;
    #tcp_nodelay on;

    #Get RealIP
    map $http_x_forwarded_for  $clientRealIp {
        ""      $remote_addr;
        ~^(?P<firstAddr>[0-9\.]+),?.*$  $firstAddr;
        }


    server {
        listen       8085;
        server_name  localhost;

        #charset koi8-r;

        location / {
            root   /usr/share/nginx/html/;
            #index  index.html index.htm;
            try_files $uri $uri/ /index.html;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
 }

#    server {
#        listen       8888;
#        server_name  localhost;
#
#        #charset koi8-r;
#
#        #access_log  logs/host.access.log  main;
#
#        root /opt/nginx/html/design;
#
#        location /design {
#            try_files $uri $uri/ @router;
#            index index.html index.htm;
#        }
#
#        location @router {
#          rewrite ^.*$ /index.html last;
#        }
#
#    }

#        server {
#        listen       8886;
#        server_name  localhost;
#
#        #charset koi8-r;
#
#        #access_log  logs/host.access.log  main;
#
#        root /opt/nginx/html/admin;
#
#        location /api {
#            proxy_pass http://localhost:8769;
#        }
#
#        location /admin {
#            root   html;
#            #index  index.html index.htm;
#            try_files $uri $uri/ /index.html;
#        }
#
#        location @router {
#          rewrite ^.*$ /index.html last;
#        }

#    }
    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}


    # HTTPS server
    #
    #server {
    #    listen       443 ssl;
     #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_cache    shared:SSL:1m;
    #    ssl_session_timeout  5m;

    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers  on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}
}